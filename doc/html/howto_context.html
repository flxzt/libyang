<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libyang: Context</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="cesnet-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">libyang<span id="projectnumber">&#160;2.1.148</span>
   </div>
   <div id="projectbrief">libyang is YANG data modelling language parser and toolkit written (and providing API) in C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('howto_context.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Context</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The context concept allows callers to work in environments with different sets of YANG modules.</p>
<p>The first step with libyang is to create a new context using <a class="el" href="group__context.html#ga16a2bdf484be8dd3657a141d2cc0500e" title="Create libyang context.">ly_ctx_new()</a>. It returns a handler used in the following work. Note that the context is supposed to provide a stable environment for work with the data. Therefore the caller should prepare a complete context and after starting working with the data, the context and its content should not change. If it does, in most cases it leads to the context being recompiled and any parsed data invalid. Despite the API not enforcing this approach, it may change in future versions in the form of a locking mechanism which would allow further optimization of data manipulation. Also note that modules cannot be removed from their context. If you need to change the set of the schema modules in the context, the recommended way is to create a new context. To remove the context, there is <a class="el" href="group__context.html#ga7677ab72c8bcaa621e0ae4063076d7f7" title="Free all internal structures of the specified context.">ly_ctx_destroy()</a> function.</p>
<p>The context has <a class="el" href="group__contextoptions.html">several options</a> changing behavior when processing YANG modules being inserted. The specific behavior is mentioned below. All the options can be set as a parameter when the context is being created or later with <a class="el" href="group__context.html#ga1891df928268ec799f11435d80a32e42" title="Set some of the context&#39;s options, see Context options.">ly_ctx_set_options()</a>.</p>
<p>When creating a new context, another optional parameter is search_dir It provide directory where libyang will automatically search for YANG modules being imported or included. There is actually a set of search paths which can be later modified using <a class="el" href="group__context.html#ga779252a9f7d23e09c2ceade107c3578f" title="Add the search path into libyang context.">ly_ctx_set_searchdir()</a>, <a class="el" href="group__context.html#ga0fdeb55ccad44d3b4b78bb116959c9d4" title="Clean the search path(s) from the libyang context.">ly_ctx_unset_searchdir()</a> and <a class="el" href="group__context.html#ga847a60f97cd514dd755d0b2e4e6d54c8" title="Remove the least recently added search path(s) from the libyang context.">ly_ctx_unset_searchdir_last()</a> functions. Before the values in the set are used, also the current working directory is (non-recursively) searched. For the case of the explicitly set search directories, they are searched recursively - all their subdirectories (and symlinks) are taken into account. Searching in the current working directory can be avoided with the context's <a class="el" href="group__contextoptions.html#ga08ef1a18adb7dac8e9f4a2c9522875ba">LY_CTX_DISABLE_SEARCHDIR_CWD</a> option. Searching in all the context's search dirs (without removing them) can be avoided with the context's <a class="el" href="group__contextoptions.html#ga28e6a71a1260032690f66fbcc940e607">LY_CTX_DISABLE_SEARCHDIRS</a> option (or via <a class="el" href="group__context.html#ga1891df928268ec799f11435d80a32e42" title="Set some of the context&#39;s options, see Context options.">ly_ctx_set_options()</a>). This automatic searching can be preceded by a custom module searching callback (<a class="el" href="group__context.html#ga2a077cfc7d38cc086c1f3b5e45e71e10" title="Callback for retrieving missing included or imported models in a custom way.">ly_module_imp_clb</a>) set via <a class="el" href="group__context.html#ga704db60ea84aa35b1a54a77908949388" title="Set missing include or import module callback. It is meant to be used when the models are not locally...">ly_ctx_set_module_imp_clb()</a>. The algorithm of searching in search dirs is also available via API as <a class="el" href="group__schematree.html#gaa48d964b8a0e64865aee1113fafaa8ff" title="Search for the schema file in the specified searchpaths.">lys_search_localfile()</a> function.</p>
<p>YANG modules are added into the context using <a class="el" href="howto_schema_parsers.html">parser functions</a> - <b>lys_parse*</b>(). Alternatively, also <a class="el" href="group__context.html#gab2a4fb33c996e06ce3dde4f578905c87" title="Try to find the model in the searchpaths of ctx and load it into it. If custom missing module callbac...">ly_ctx_load_module()</a> can be used - in that case the <a class="el" href="group__context.html#ga2a077cfc7d38cc086c1f3b5e45e71e10" title="Callback for retrieving missing included or imported models in a custom way.">ly_module_imp_clb</a> or automatic search in search directories and in the current working directory is used, as described above. YANG submodules cannot be loaded or even validated directly, they are loaded always only as includes of YANG modules. Explicitly parsed/loaded modules are handled as implemented - libyang is able to instantiate data representing such a module. The modules loaded implicitly, are not implemented and serve only as a source of grouping or typedef definitions. Context can hold multiple revisions of the same YANG module, but only one of them can be implemented. Details about the difference between implemented and imported modules can be found on <a class="el" href="howto_schema.html">YANG Modules</a> page. This behavior can be changed with the context's <a class="el" href="group__contextoptions.html#gad05555dccf19e636250933d6f450102e">LY_CTX_ALL_IMPLEMENTED</a> option, which causes that all the parsed modules, whether loaded explicitly or implicitly, are set to be implemented. Note, that as a consequence of this option, only a single revision of any module can be present in the context in this case. Also, a less crude option <a class="el" href="group__contextoptions.html#ga159ba296b385f5e968b66f9612acc741">LY_CTX_REF_IMPLEMENTED</a> can be used to implement only referenced modules that should also be implemented.</p>
<p>When loading/importing a module without revision, the latest revision of the required module is supposed to load. For a context, the first time the latest revision of a module is requested, it is properly searched for and loaded. However, when this module is requested (without revision) the second time, the one found previously is returned. This has the advantage of not searching for the module repeatedly but there is a drawback in case the content of search directories is updated and a later revision become available.</p>
<p>Context holds all the schema modules internally. To get a specific module, use <a class="el" href="group__context.html#ga3f96a2aa769ba4910bbb6af479abd101" title="Get YANG module of the given name and revision.">ly_ctx_get_module()</a> (or some of its variants). If you need to do something with all the modules in the context, it is advised to iterate over them using <a class="el" href="group__context.html#gac00189c75d3d0ebb3071558dced622af" title="Iterate over all modules in the given context.">ly_ctx_get_module_iter()</a>. Alternatively, the <a class="el" href="group__context.html#ga34a07a3afcc26cd0615e629924179945" title="Get data of the internal ietf-yang-library module with information about all the loaded modules....">ly_ctx_get_yanglib_data()</a> function can be used to get complex information about the schemas in the context in the form of data tree defined by <a href="https://tools.ietf.org/html/rfc7895">ietf-yang-library</a> module.</p>
<p>YANG data can be parsed by <b>lyd_parse_*</b>() functions. Note, that functions for schema have <b>lys_</b> prefix (or <b>lysp_</b> for the parsed and <b>lysc_</b> for the compiled schema - for details see <a class="el" href="howto_schema.html">YANG Modules</a> page) while functions for instance data have <b>lyd_</b> prefix. Details about data formats or handling data without the appropriate YANG module in context can be found on <a class="el" href="howto_data.html">Data Instances</a> page.</p>
<p>Besides the YANG modules, context holds also <a class="el" href="howto_errors.html">error information</a> and <a class="el" href="howto_context_dict.html">database of strings</a>, both connected with the processed YANG modules and data.</p>
<ul>
<li><a class="el" href="howto_errors.html">Errors Handling</a></li>
<li><a class="el" href="howto_context_dict.html">Context Dictionary</a></li>
</ul>
<dl class="section note"><dt>Note</dt><dd>API for this group of functions is available in the <a class="el" href="howto_threads.html#context">context module</a>.</dd></dl>
<h2><a class="anchor" id="autotoc_md0"></a>
Functions List</h2>
<ul>
<li><a class="el" href="group__context.html#ga16a2bdf484be8dd3657a141d2cc0500e" title="Create libyang context.">ly_ctx_new()</a></li>
<li><a class="el" href="group__context.html#ga7677ab72c8bcaa621e0ae4063076d7f7" title="Free all internal structures of the specified context.">ly_ctx_destroy()</a></li>
<li><a class="el" href="group__context.html#ga779252a9f7d23e09c2ceade107c3578f" title="Add the search path into libyang context.">ly_ctx_set_searchdir()</a></li>
<li><a class="el" href="group__context.html#ga7ac15831c1901cbdfe9970b060efa887" title="Get the NULL-terminated list of the search paths in libyang context. Do not modify the result!">ly_ctx_get_searchdirs()</a></li>
<li><a class="el" href="group__context.html#ga0fdeb55ccad44d3b4b78bb116959c9d4" title="Clean the search path(s) from the libyang context.">ly_ctx_unset_searchdir()</a></li>
<li><a class="el" href="group__context.html#ga847a60f97cd514dd755d0b2e4e6d54c8" title="Remove the least recently added search path(s) from the libyang context.">ly_ctx_unset_searchdir_last()</a></li>
<li><a class="el" href="group__context.html#ga1891df928268ec799f11435d80a32e42" title="Set some of the context&#39;s options, see Context options.">ly_ctx_set_options()</a></li>
<li><a class="el" href="group__context.html#ga3eb1237e1bff1c256d5bde73294fd28a" title="Get the currently set context&#39;s options.">ly_ctx_get_options()</a></li>
<li><a class="el" href="group__context.html#ga542b84c9cdcf7f397259d7178ee38b7c" title="Unset some of the context&#39;s options, see Context options.">ly_ctx_unset_options()</a></li>
<li><a class="el" href="group__context.html#ga704db60ea84aa35b1a54a77908949388" title="Set missing include or import module callback. It is meant to be used when the models are not locally...">ly_ctx_set_module_imp_clb()</a></li>
<li><a class="el" href="group__context.html#ga026fc9d4ecfa61ee4c6c92662b47ead2" title="Get the custom callback for missing import/include module retrieval.">ly_ctx_get_module_imp_clb()</a></li>
<li><a class="el" href="group__context.html#gab2a4fb33c996e06ce3dde4f578905c87" title="Try to find the model in the searchpaths of ctx and load it into it. If custom missing module callbac...">ly_ctx_load_module()</a></li>
<li><a class="el" href="group__context.html#gac00189c75d3d0ebb3071558dced622af" title="Iterate over all modules in the given context.">ly_ctx_get_module_iter()</a></li>
<li><a class="el" href="group__context.html#ga3f96a2aa769ba4910bbb6af479abd101" title="Get YANG module of the given name and revision.">ly_ctx_get_module()</a></li>
<li><a class="el" href="group__context.html#ga9aeee46c2c84a3138d7fc164a4168613" title="Get YANG module of the given namespace and revision.">ly_ctx_get_module_ns()</a></li>
<li><a class="el" href="group__context.html#ga3103754834298177ec380a555cea70f0" title="Get the (only) implemented YANG module specified by its name.">ly_ctx_get_module_implemented()</a></li>
<li><a class="el" href="group__context.html#gac51dc9a3127acfd4a551f21c30bec49b" title="Get the (only) implemented YANG module specified by its namespace.">ly_ctx_get_module_implemented_ns()</a></li>
<li><a class="el" href="group__context.html#gafe8af16b91e25869a784f32eb86d8f3f" title="Get the latest revision of the YANG module specified by its name.">ly_ctx_get_module_latest()</a></li>
<li><a class="el" href="group__context.html#gaa87a30c6b9b75eb9acbae04e253ce96b" title="Get the latest revision of the YANG module specified by its namespace.">ly_ctx_get_module_latest_ns()</a></li>
<li><a class="el" href="group__context.html#ga60fc25c4a14a47dde327f95f6016b59b" title="Get a specific submodule from context. If its belongs-to module is known, use ly_ctx_get_submodule2()...">ly_ctx_get_submodule()</a></li>
<li><a class="el" href="group__context.html#ga791db2a28a723fa4c5d3e0c0648d8c85" title="Get the latests revision of a submodule from context. If its belongs-to module is known,...">ly_ctx_get_submodule_latest()</a></li>
<li><a class="el" href="group__context.html#gadfecb8bfe0a51500a644a3de4ad852ac" title="Get a specific submodule from a module. If the belongs-to module is not known, use ly_ctx_get_submodu...">ly_ctx_get_submodule2()</a></li>
<li><a class="el" href="group__context.html#ga911278e5a9e0fbeeb71d99e34954f4f5" title="Get the latest revision of a submodule from a module. If the belongs-to module is not known,...">ly_ctx_get_submodule2_latest()</a></li>
<li><a class="el" href="group__context.html#ga969426519ea501704daf6019ec934de5" title="Reset cached latest revision information of the schemas in the context.">ly_ctx_reset_latests()</a></li>
<li><a class="el" href="group__context.html#ga34a07a3afcc26cd0615e629924179945" title="Get data of the internal ietf-yang-library module with information about all the loaded modules....">ly_ctx_get_yanglib_data()</a></li>
<li><a class="el" href="group__context.html#gaecfb3bae1347b1ff07ee3b3e55e96dac" title="Get the change count of the context (module set) during its life-time.">ly_ctx_get_change_count()</a></li>
<li><a class="el" href="group__context.html#ga50e9bb7dd7f70dff6e00f821f2b40969" title="Learn the number of internal modules of a context. Internal modules is considered one that was loaded...">ly_ctx_internal_modules_count()</a></li>
<li><a class="el" href="group__schematree.html#gaa48d964b8a0e64865aee1113fafaa8ff" title="Search for the schema file in the specified searchpaths.">lys_search_localfile()</a></li>
<li><a class="el" href="group__schematree.html#gaa85994eab6b0edf898d65e3181743959" title="Make the specific module implemented.">lys_set_implemented()</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="howto.html">libyang API Overview</a></li>
    <li class="footer">Generated on Tue Jan 28 2025 10:44:39 for libyang by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
