<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libyang: Extension Plugins</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="cesnet-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">libyang<span id="projectnumber">&#160;2.1.148</span>
   </div>
   <div id="projectbrief">libyang is YANG data modelling language parser and toolkit written (and providing API) in C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('howto_plugins_extensions.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Extension Plugins</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Note that the part of the libyang API here is available only by including a separated <code>&lt;libyang/plugins_exts.h&gt;</code> header file. Also note that the extension plugins API is versioned separately from libyang itself, so backward incompatible changes can come even without changing libyang major version.</p>
<p>YANG extensions are very complex. Usually only its description specifies how it is supposed to behave, what are the allowed substatements, their cardinality or if the standard YANG statements placed inside the extension differs somehow in their meaning or behavior. libyang provides the Extension plugins API to implement such extensions and add its support into libyang itself. However we tried our best, the API is not (and it cannot be) so universal and complete to cover all possibilities. There are definitely use cases which cannot be simply implemented only with this API.</p>
<p>libyang implements 3 important extensions: <a href="https://tools.ietf.org/html/rfc8341">NACM</a>, <a class="el" href="howto_data.html#howtoDataMetadata">Metadata</a> and <a class="el" href="howto_data.html#howtoDataYangdata">yang-data</a>. Despite the core implementation in all three cases is done via extension plugin API, also other parts of the libyang code had to be extended to cover complete scope of the extensions.</p>
<p>We believe, that the API is capable to allow implementation of very wide range of YANG extensions. However, if you see limitations for the particular YANG extension, don't hesitate to contact the project developers to discuss all the options, including updating the API.</p>
<p>The plugin's functionality is provided to libyang via a set of callbacks specified as an array of <a class="el" href="group__plugins_extensions.html#structlyplg__ext__record">lyplg_ext_record</a> structures using the <a class="el" href="group__plugins_extensions.html#gaf4b7b9d0fa30f72c911cbad4ae96c63a" title="Macro to define plugin information in external plugins.">LYPLG_EXTENSIONS</a> macro.</p>
<p>The most important callbacks are <a class="el" href="group__plugins_extensions.html#a9e9ebdccfcec578b39cfbd77f8003628">lyplg_ext.parse</a> and <a class="el" href="group__plugins_extensions.html#ae606fd460c774da56775227b83867e98">lyplg_ext.compile</a>. They are responsible for parsing and compiling extension instance. This should include validating all the substatements, their values, or placement of the extension instance itself. If needed, the processed data can be stored in some form into the compiled schema representation of the extension instance. To make this task as easy as possible, libyang provides several <a class="el" href="group__plugins_extensions_parse.html">parsing</a> and <a class="el" href="group__plugins_extensions_compile.html">compilation</a> helper functions to process known YANG statements exactly as if they were standard YANG statements.</p>
<p>The data validation callback <a class="el" href="group__plugins_extensions.html#aa6660df0a090c086addba5bbf6f3e307">lyplg_ext.validate</a> is used for additional validation of a data nodes that contains the connected extension instance directly (as a substatement) or indirectly in case of terminal nodes via their type (no matter if the extension instance is placed directly in the leaf's/leaf-list's type or in the type of the referenced typedef).</p>
<p>The <a class="el" href="group__plugins_extensions.html#a5730f393681e51e39a3e1162f5f05e84">lyplg_ext.printer_info</a> callback implement printing the compiled extension instance data when the schema (module) is being printed in the <a class="el" href="group__schematree.html#ggab5423b396c43611cb0ad0060d78ead78afd14d42409713d408e62663cb8d22c19">LYS_OUT_YANG_COMPILED</a> (info) format. As for compile callback, there are also <a class="el" href="group__plugins_extensions_sprinter_info.html">helper functions</a> to access printer's context and to print standard YANG statements placed in the extension instance by libyang itself.</p>
<p>The <a class="el" href="group__plugins_extensions.html#aa0e6811d13cc9ecbd787e0f9cba4a917">lyplg_ext.printer_ctree</a> and <a class="el" href="group__plugins_extensions.html#af978f3602f5f949eaa3f7417094aaca4">lyplg_ext.printer_ptree</a> callbacks implement printing of YANG tree diagrams (RFC 8340) for extension instance data. These callbacks are called for extension instances that have parents of type <a class="el" href="group__plugins_extensions.html#gga7cb1dc32154d33bc5ac5e60aec143be3a76248a87fbf5ecb8a76b2571e62b9161">LY_STMT_MODULE</a>, <a class="el" href="group__plugins_extensions.html#gga7cb1dc32154d33bc5ac5e60aec143be3a57b81acb0c675289b8d0d01066772edc">LY_STMT_SUBMODULE</a>. Or these callbacks are called if the printer_tree finds a compiled/parsed data-node containing an extension instance. The callbacks should then decide which nodes should be printed within the extension instance. In addition, it is possible to register additional callbacks to the printer_tree context to override the form of the each node in the extension instance.</p>
<p>The last callback, <a class="el" href="group__plugins_extensions.html#a7a5eb14d93dd00b3bf90e6edc41a92d9">lyplg_ext.cfree</a>, is supposed to free all the data allocated by the <a class="el" href="group__plugins_extensions.html#ae606fd460c774da56775227b83867e98">lyplg_ext.compile</a> callback. To free the data created by helper function <a class="el" href="group__plugins_extensions_compile.html#ga1e50693fd9df49d26bc52d4b536abb6d" title="Compile substatements of an extension instance.">lyplg_ext_compile_extension_instance()</a>, the plugin can used <a class="el" href="group__plugins_extensions.html#gac5cccca734cfdc1a77fdb130e2b1998f" title="Free the extension instance&#39;s data compiled with lyplg_ext_compile_extension_instance().">lyplg_ext_cfree_instance_substatements()</a>.</p>
<p>The plugin information contains also the plugin identifier (<a class="el" href="group__plugins_types.html#aa2c5615ae6529ac8966096edc0ccfce4">lyplg_type.id</a>). This string can serve to identify the specific plugin responsible to storing data value. In case the user can recognize the id string, it can access the plugin specific data with the appropriate knowledge of its structure.</p>
<p>Logging information from an extension plugin is possible via <a class="el" href="group__plugins_extensions_parse.html#ga851d4a4a01fcbcd14dcb4c21e8108293" title="Log a message from an extension plugin using the parsed extension instance.">lyplg_ext_parse_log()</a> and <a class="el" href="group__plugins_extensions_compile.html#ga272fd53075a3adb7704295b9da9490ce" title="Log a message from an extension plugin using the compiled extension instance.">lyplg_ext_compile_log()</a> functions. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="howto.html">libyang API Overview</a></li><li class="navelem"><a class="el" href="howto_schema.html">YANG Modules</a></li><li class="navelem"><a class="el" href="howto_plugins.html">Plugins</a></li>
    <li class="footer">Generated on Tue Jan 28 2025 10:44:39 for libyang by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
