<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libyang: Type Plugins</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="cesnet-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">libyang<span id="projectnumber">&#160;2.1.148</span>
   </div>
   <div id="projectbrief">libyang is YANG data modelling language parser and toolkit written (and providing API) in C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('howto_plugins_types.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Type Plugins</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Note that the part of the libyang API here is available only by including a separated <code>&lt;libyang/plugins_types.h&gt;</code> header file. Also note that the type plugins API is versioned separately from libyang itself, so backward incompatible changes can come even without changing libyang major version.</p>
<p>YANG allows to define new data types via <em>typedef</em> statements or even in leaf's/leaf-list's <em>type</em> statements. Such types are derived (directly or indirectly) from a set of <a href="https://tools.ietf.org/html/rfc7950#section-4.2.4">YANG built-in types</a>. libyang implements all handling of the data values of the YANG types via the Type Plugins API. Internally, there is implementation of the built-in types and others can be added as an external plugin (see <a class="el" href="howto_plugins.html">Plugins</a>).</p>
<p>Type plugin is supposed to</p><ul>
<li>store (and canonize) data value,</li>
<li>validate it according to the type's restrictions,</li>
<li>compare two values (<a class="el" href="tree__data_8h.html#structlyd__value" title="YANG data representation.">lyd_value</a>) of the same type,</li>
<li>duplicate value (<a class="el" href="tree__data_8h.html#structlyd__value" title="YANG data representation.">lyd_value</a>),</li>
<li>print it and</li>
<li>free the specific data inserted into <a class="el" href="tree__data_8h.html#structlyd__value" title="YANG data representation.">lyd_value</a>.</li>
</ul>
<p>These tasks are implemented as callbacks provided to libyang via <a class="el" href="group__plugins_types.html#structlyplg__type__record">lyplg_type_record</a> structures defined as array using <a class="el" href="group__plugins_types.html#gaa04053542bf0f9e2b69e8f4635600cc7" title="Macro to define plugin information in external plugins.">LYPLG_TYPES</a> macro.</p>
<p>All the callbacks are supposed to do not log directly via libyang logger. Instead, they return <a class="el" href="group__errors.html#gabfc4235478f06567d878806b8c0c6992" title="libyang&#39;s error codes returned by the libyang functions.">LY_ERR</a> value and <a class="el" href="group__errors.html#structly__err__item" title="Libyang full error structure.">ly_err_item</a> error structure(s) describing the detected error(s) (helper functions <a class="el" href="group__plugins_types.html#ga37846e55b009a1a21e4adf78f18d2ceb" title="Create and fill error structure.">ly_err_new()</a> and <a class="el" href="group__plugins_types.html#ga57427367fc3afcd961be2515c4796f42" title="Destructor for the error records created with ly_err_new().">ly_err_free()</a> are available).</p>
<p>The main functionality is provided via <a class="el" href="group__plugins_types.html#ga81738abddbf65a7d7ce445724743241b" title="Callback to store the given value according to the given type.">lyplg_type_store_clb</a> callback responsible for canonizing and storing provided string representation of the value in specified format (XML and JSON supported). Valid value is stored in <a class="el" href="tree__data_8h.html#structlyd__value" title="YANG data representation.">lyd_value</a> structure - its union allows to store data as one of the predefined type or in a custom form behind the void *ptr member of <a class="el" href="tree__data_8h.html#structlyd__value" title="YANG data representation.">lyd_value</a> structure. The callback is also responsible for storing canonized string representation of the value as <a class="el" href="tree__data_8h.html#aeb325cb6a5ece5afc90b51d78e622d55">lyd_value._canonical</a>. If the type does not define canonical representation, the original representation is stored. In case there are any differences between the representation in specific input types, the plugin is supposed to store the value in JSON representation - typically, the difference is in prefix representation and JSON format uses directly the module names as prefixes.</p>
<p>Usually, all the validation according to the type's restrictions is done in the store callback. However, in case the type requires some validation referencing other entities in the data tree, the optional validation callback <a class="el" href="group__plugins_types.html#ga3e84f119ae5d6588309a4cf39ea9e986" title="Callback to validate the stored value in data.">lyplg_type_validate_clb</a> can be implemented.</p>
<p>The stored values can be compared in a specific way by providing <a class="el" href="group__plugins_types.html#gad35cccf37d36f79416730ba072e2907d" title="Callback for comparing 2 values of the same type.">lyplg_type_compare_clb</a>. In case the best way to compare the values is to compare their canonical string representations, the <a class="el" href="group__plugins_types_simple.html#gab03764deaacec192579a934a23099fec" title="Implementation of lyplg_type_compare_clb for a generic simple type.">lyplg_type_compare_simple()</a> function can be used.</p>
<p>Data duplication is done with <a class="el" href="group__plugins_types.html#ga413c9bb3a6795b7257a0efb9e0429abb" title="Callback to duplicate data in the data structure.">lyplg_type_dup_clb</a> callbacks. Note that the callback is responsible even for duplicating the <a class="el" href="tree__data_8h.html#aeb325cb6a5ece5afc90b51d78e622d55">lyd_value._canonical</a>, so the callback must be always present (the canonical value is always present). If there is nothing else to duplicate, the plugin can use the generic <a class="el" href="group__plugins_types_simple.html#ga6c5755e4f70daaa135debc58daec2cfa" title="Implementation of lyplg_type_dup_clb for a generic simple type.">lyplg_type_dup_simple()</a>.</p>
<p>The stored value can be printed into the required format via <a class="el" href="group__plugins_types.html#gac0c300e10b9dd292970cc95854f1f338" title="Callback for getting the value of the data stored in value.">lyplg_type_print_clb</a> implementation. Simple printing canonical representation of the value is implemented by <a class="el" href="group__plugins_types_simple.html#ga078b0ce90790d49d0304633e2bca6442" title="Implementation of lyplg_type_print_clb for a generic simple type.">lyplg_type_print_simple()</a>.</p>
<p>And finally freeing any data stored in the <a class="el" href="tree__data_8h.html#structlyd__value" title="YANG data representation.">lyd_value</a> by the plugin is done by implementation of <a class="el" href="group__plugins_types.html#gaf27eeb5b50501c21110fb4dc81c1ed8f" title="Callback for freeing the user type values stored by lyplg_type_store_clb.">lyplg_type_free_clb</a>. Freeing only the canonical string is implemented by <a class="el" href="group__plugins_types_simple.html#ga93190bea927f1f3c7ba20d75d59d880a" title="Implementation of lyplg_type_free_clb for a generic simple type.">lyplg_type_free_simple()</a>.</p>
<p>The plugin information contains also the plugin identifier (<a class="el" href="group__plugins_types.html#aa2c5615ae6529ac8966096edc0ccfce4">lyplg_type.id</a>). This string can serve to identify the specific plugin responsible to storing data value. In case the user can recognize the id string, it can access the plugin specific data with the appropriate knowledge of its structure.</p>
<p>Besides the mentioned <code>_simple</code> functions, libyang provides, as part of the type plugins API, all the callbacks implementing the built-in types in the internal plugins:</p>
<ul>
<li><a class="el" href="group__plugins_types_simple.html">simple callbacks</a> handling only the canonical strings in the value,</li>
<li><a class="el" href="group__plugins_types_binary.html">binary built-in type</a></li>
<li><a class="el" href="group__plugins_types_bits.html">bits built-in type</a></li>
<li><a class="el" href="group__plugins_types_boolean.html">boolean built-in type</a></li>
<li><a class="el" href="group__plugins_types_decimal64.html">decimal64 built-in type</a></li>
<li><a class="el" href="group__plugins_types_empty.html">empty built-in type</a></li>
<li><a class="el" href="group__plugins_types_enumeration.html">enumeration built-in type</a></li>
<li><a class="el" href="group__plugins_types_identityref.html">identityref built-in type</a></li>
<li><a class="el" href="group__plugins_types_instanceid.html">instance-identifier built-in type</a></li>
<li><a class="el" href="group__plugins_types_integer.html">integer built-in types</a></li>
<li><a class="el" href="group__plugins_types_leafref.html">leafref built-in type</a></li>
<li><a class="el" href="group__plugins_types_string.html">string built-in type</a></li>
<li><a class="el" href="group__plugins_types_union.html">union built-in type</a></li>
</ul>
<p>And one derived type:</p>
<ul>
<li><a class="el" href="group__plugins_types_xpath10.html">xpath1.0 <code>ietf-yang-types</code> type</a></li>
</ul>
<p>In addition to these callbacks, the API also provides several functions which can help to implement your own plugin for the derived YANG types:</p>
<ul>
<li><a class="el" href="group__plugins_types.html#ga37846e55b009a1a21e4adf78f18d2ceb" title="Create and fill error structure.">ly_err_new()</a></li>
<li><a class="el" href="group__plugins_types.html#ga57427367fc3afcd961be2515c4796f42" title="Destructor for the error records created with ly_err_new().">ly_err_free()</a></li>
<li><a class="el" href="group__plugins_types.html#gaed0957320b6625600676e7165497d6bd" title="Helper function to create internal schema path representation for instance-identifier value represent...">lyplg_type_lypath_new()</a></li>
<li><a class="el" href="group__plugins_types.html#gaef0d6a3d41ecd42557a9167fd769618d" title="Free ly_path structure used by instanceid value representation.">lyplg_type_lypath_free()</a></li>
<li><a class="el" href="group__plugins_types.html#gad322db5f3c9dc1d0cbf133b7aa7b3a2f" title="Store used prefixes in a string into an internal libyang structure used in lyd_value.">lyplg_type_prefix_data_new()</a></li>
<li><a class="el" href="group__plugins_types.html#gad719f266a017c87ce4cade1dce7bb05e" title="Duplicate prefix data.">lyplg_type_prefix_data_dup()</a></li>
<li><a class="el" href="group__plugins_types.html#gaf9684b4fce23acb8fddd32ec023d83ce" title="Free internal prefix data.">lyplg_type_prefix_data_free()</a></li>
<li><a class="el" href="group__plugins_types.html#ga9f45fe441940b862a3285c1be671af71" title="Get format-specific prefix for a module.">lyplg_type_get_prefix()</a></li>
<li><a class="el" href="group__plugins_types.html#gac6ba2d69957c53309aad5202749c3cd6" title="Check that the type is suitable for the parser&#39;s hints (if any) in the specified format.">lyplg_type_check_hints()</a></li>
<li><a class="el" href="group__plugins_types.html#ga87347cd60efd1cd6c6b75a7b5d0f9c8e" title="Check that the value of a type is allowed based on its status.">lyplg_type_check_status()</a></li>
<li><a class="el" href="group__plugins_types.html#gaba5a5b41422f2e1b61552b2d0a943d20" title="Check that the lypath instance-identifier value is allowed based on the status of the nodes.">lyplg_type_lypath_check_status()</a></li>
<li><a class="el" href="group__plugins_types.html#ga9bf017fa7c164d6e2c19383dec32d82f" title="Decide if the derived identity is derived from (based on) the base identity.">lyplg_type_identity_isderived()</a></li>
<li><a class="el" href="group__plugins_types.html#gafe6596a253e080abcc23c0ea3709ac06" title="Get the corresponding module for the identity value.">lyplg_type_identity_module()</a></li>
<li><a class="el" href="group__plugins_types.html#ga1547b87bc39f12e7807e8fb62520e594" title="Implement a module (just like lys_set_implemented()), but keep maintaining unresolved items.">lyplg_type_make_implemented()</a></li>
<li><a class="el" href="group__plugins_types.html#gae274e3a8d23a90f28796e12abb324f82" title="Convert a string with a decimal64 value into libyang representation: ret = value * 10^fraction-digits...">lyplg_type_parse_dec64()</a></li>
<li><a class="el" href="group__plugins_types.html#ga07feb435691d153f344918470c7bce5d" title="Unsigned integer value parser and validator.">lyplg_type_parse_int()</a></li>
<li><a class="el" href="group__plugins_types.html#ga55904b6dabb1e677bc1b7533f125e533" title="Unsigned integer value parser and validator.">lyplg_type_parse_uint()</a></li>
<li><a class="el" href="group__plugins_types.html#gae473e5395bc779e9abf8c3c5501eeec9" title="Find leafref target in data.">lyplg_type_resolve_leafref()</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="howto.html">libyang API Overview</a></li><li class="navelem"><a class="el" href="howto_schema.html">YANG Modules</a></li><li class="navelem"><a class="el" href="howto_plugins.html">Plugins</a></li>
    <li class="footer">Generated on Tue Jan 28 2025 10:44:39 for libyang by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
